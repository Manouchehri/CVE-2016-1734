/* This file has been generated by the Hex-Rays decompiler.
   Copyright (c) 2007-2015 Hex-Rays <info@hex-rays.com>

   Detected compiler: GNU C++
*/

#include <defs.h>


//-------------------------------------------------------------------------
// Function declarations

__int64 __fastcall Asciihex_to_binary(char); // idb
__int64 __fastcall findMatchingEndpoint(unsigned __int8 a1, unsigned __int8 a2, __int64 a3, __int64 a4);
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommandPool::MetaClass::MetaClass(AppleUSBNetworkingCommandPool::MetaClass *this))(AppleUSBNetworkingCommandPool::MetaClass *__hidden this);
__int64 __fastcall AppleUSBNetworkingCommandPool::MetaClass::~MetaClass(AppleUSBNetworkingCommandPool::MetaClass *__hidden this); // idb
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommandPool::AppleUSBNetworkingCommandPool(IOCommandPool *a1, const OSMetaClass *a2))(AppleUSBNetworkingCommandPool *__hidden this);
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommandPool::AppleUSBNetworkingCommandPool(IOCommandPool *a1, const OSMetaClass *a2))(AppleUSBNetworkingCommandPool *__hidden this);
__int64 __fastcall AppleUSBNetworkingCommandPool::~AppleUSBNetworkingCommandPool(AppleUSBNetworkingCommandPool *__hidden this); // idb
__int64 __fastcall AppleUSBNetworkingCommandPool::~AppleUSBNetworkingCommandPool(AppleUSBNetworkingCommandPool *__hidden this); // idb
void __fastcall AppleUSBNetworkingCommandPool::~AppleUSBNetworkingCommandPool(AppleUSBNetworkingCommandPool *this);
_QWORD *__fastcall AppleUSBNetworkingCommandPool::getMetaClass(AppleUSBNetworkingCommandPool *this);
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommandPool::MetaClass::MetaClass(AppleUSBNetworkingCommandPool::MetaClass *this))(AppleUSBNetworkingCommandPool::MetaClass *__hidden this);
IOCommandPool *__fastcall AppleUSBNetworkingCommandPool::MetaClass::alloc(AppleUSBNetworkingCommandPool::MetaClass *this, unsigned __int64 a2);
__int64 __fastcall AppleUSBNetworkingCommandPool::AppleUSBNetworkingCommandPool(IOCommandPool *a1);
__int64 __fastcall AppleUSBNetworkingCommandPool::AppleUSBNetworkingCommandPool(IOCommandPool *a1);
IOCommandPool *__fastcall AppleUSBNetworkingCommandPool::withParameters(__int64 a1, unsigned __int64 a2, unsigned int a3);
char __fastcall AppleUSBNetworkingCommandPool::initWithParameters(__int64 a1, __int64 a2, int a3, int a4);
__int64 __fastcall AppleUSBNetworkingCommandPool::start(AppleUSBNetworkingCommandPool *__hidden this); // idb
int __fastcall AppleUSBNetworkingCommandPool::stop(AppleUSBNetworkingCommandPool *this);
void __fastcall AppleUSBNetworkingCommandPool::stopGated(AppleUSBNetworkingCommandPool *this);
int __fastcall AppleUSBNetworkingCommandPool::free(AppleUSBNetworkingCommandPool *this);
int __fastcall AppleUSBNetworkingCommandPool::returnCommand(AppleUSBNetworkingCommandPool *this, IOCommand *a2);
__int64 __fastcall AppleUSBNetworkingCommandPool::gatedReturnCommand(AppleUSBNetworkingCommandPool *this, IOCommand *a2);
int __fastcall AppleUSBNetworkingCommandPool::getCommand(AppleUSBNetworkingCommandPool *this, unsigned __int8 a2);
IOCommand *__fastcall AppleUSBNetworkingCommandPool::allocateCommand(AppleUSBNetworkingCommandPool *this, __int64 a2, __int64 a3, unsigned __int64 a4);
IOCommand *__fastcall AppleUSBNetworkingCommand::withParameters(AppleUSBNetworkingCommand *this, AppleUSBNetworkingCommandPool *a2, IOBufferMemoryDescriptor *a3);
__int64 (__fastcall **__fastcall AppleUSBNetworkingHostCommandPool::MetaClass::MetaClass(AppleUSBNetworkingHostCommandPool::MetaClass *this))(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden this);
__int64 __fastcall AppleUSBNetworkingHostCommandPool::MetaClass::~MetaClass(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden this); // idb
__int64 (__fastcall **__fastcall AppleUSBNetworkingHostCommandPool::AppleUSBNetworkingHostCommandPool(IOCommandPool *a1, const OSMetaClass *a2))(AppleUSBNetworkingHostCommandPool *__hidden this);
__int64 (__fastcall **__fastcall AppleUSBNetworkingHostCommandPool::AppleUSBNetworkingHostCommandPool(IOCommandPool *a1, const OSMetaClass *a2))(AppleUSBNetworkingHostCommandPool *__hidden this);
__int64 __fastcall AppleUSBNetworkingHostCommandPool::~AppleUSBNetworkingHostCommandPool(AppleUSBNetworkingHostCommandPool *__hidden this); // idb
__int64 __fastcall AppleUSBNetworkingHostCommandPool::~AppleUSBNetworkingHostCommandPool(AppleUSBNetworkingHostCommandPool *__hidden this); // idb
void __fastcall AppleUSBNetworkingHostCommandPool::~AppleUSBNetworkingHostCommandPool(AppleUSBNetworkingHostCommandPool *this);
_QWORD *__fastcall AppleUSBNetworkingHostCommandPool::getMetaClass(AppleUSBNetworkingHostCommandPool *this);
__int64 (__fastcall **__fastcall AppleUSBNetworkingHostCommandPool::MetaClass::MetaClass(AppleUSBNetworkingHostCommandPool::MetaClass *this))(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden this);
IOCommandPool *__fastcall AppleUSBNetworkingHostCommandPool::MetaClass::alloc(AppleUSBNetworkingHostCommandPool::MetaClass *this, unsigned __int64 a2);
__int64 __fastcall AppleUSBNetworkingHostCommandPool::AppleUSBNetworkingHostCommandPool(IOCommandPool *a1);
__int64 __fastcall AppleUSBNetworkingHostCommandPool::AppleUSBNetworkingHostCommandPool(IOCommandPool *a1);
IOCommandPool *__fastcall AppleUSBNetworkingHostCommandPool::withParameters(__int64 a1, unsigned __int64 a2, unsigned int a3);
char __fastcall AppleUSBNetworkingHostCommandPool::initWithParameters(__int64 a1, __int64 a2, int a3, int a4);
IOCommand *__fastcall AppleUSBNetworkingHostCommandPool::allocateCommand(AppleUSBNetworkingHostCommandPool *this);
int __fastcall AppleUSBNetworkingHostCommandPool::free(AppleUSBNetworkingHostCommandPool *this);
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommand::MetaClass::MetaClass(AppleUSBNetworkingCommand::MetaClass *this))(AppleUSBNetworkingCommand::MetaClass *__hidden this);
__int64 __fastcall AppleUSBNetworkingCommand::MetaClass::~MetaClass(AppleUSBNetworkingCommand::MetaClass *__hidden this); // idb
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommand::AppleUSBNetworkingCommand(IOCommand *a1, const OSMetaClass *a2))(AppleUSBNetworkingCommand *__hidden this);
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommand::AppleUSBNetworkingCommand(IOCommand *a1, const OSMetaClass *a2))(AppleUSBNetworkingCommand *__hidden this);
__int64 __fastcall AppleUSBNetworkingCommand::~AppleUSBNetworkingCommand(AppleUSBNetworkingCommand *__hidden this); // idb
__int64 __fastcall AppleUSBNetworkingCommand::~AppleUSBNetworkingCommand(AppleUSBNetworkingCommand *__hidden this); // idb
void __fastcall AppleUSBNetworkingCommand::~AppleUSBNetworkingCommand(AppleUSBNetworkingCommand *this);
_QWORD *__fastcall AppleUSBNetworkingCommand::getMetaClass(AppleUSBNetworkingCommand *this);
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommand::MetaClass::MetaClass(AppleUSBNetworkingCommand::MetaClass *this))(AppleUSBNetworkingCommand::MetaClass *__hidden this);
IOCommand *__fastcall AppleUSBNetworkingCommand::MetaClass::alloc(AppleUSBNetworkingCommand::MetaClass *this, unsigned __int64 a2);
__int64 __fastcall AppleUSBNetworkingCommand::AppleUSBNetworkingCommand(IOCommand *a1);
__int64 __fastcall AppleUSBNetworkingCommand::AppleUSBNetworkingCommand(IOCommand *a1);
char __fastcall AppleUSBNetworkingCommand::initWithParameters(AppleUSBNetworkingCommand *this, AppleUSBNetworkingCommandPool *a2, IOBufferMemoryDescriptor *a3);
int __fastcall AppleUSBNetworkingCommand::getDataPointer(AppleUSBNetworkingCommand *this);
__int64 __fastcall AppleUSBNetworkingCommand::setBufferLength(AppleUSBNetworkingCommand *__hidden this, unsigned __int64); // idb
int __fastcall AppleUSBNetworkingCommand::free(AppleUSBNetworkingCommand *this);
int __fastcall AppleUSBNetworkingCommand::setContext(AppleUSBNetworkingCommand *this, OSObject *a2);
__int64 __fastcall AppleUSBNetworkingCommandPool::MetaClass::~MetaClass(AppleUSBNetworkingCommandPool::MetaClass *__hidden this); // idb
__int64 __fastcall AppleUSBNetworkingHostCommandPool::MetaClass::~MetaClass(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden this); // idb
__int64 __fastcall AppleUSBNetworkingCommand::MetaClass::~MetaClass(AppleUSBNetworkingCommand::MetaClass *__hidden this); // idb
__int64 (__fastcall **_GLOBAL__sub_I_AppleUSBNetworkingCommand_cpp())(AppleUSBNetworkingCommand::MetaClass *__hidden this);
__int64 `global destructor keyed to'_a();
int _start();
char *OSKextGetCurrentIdentifier();
char *OSKextGetCurrentVersionString();
__int64 OSKextGetCurrentLoadTag();
int _stop();
// int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD); weak
// _QWORD __cdecl OSMetaClass::~OSMetaClass(OSMetaClass *__hidden this); idb
// int __fastcall StandardUSB::getEndpointType(_QWORD); weak
// int __fastcall StandardUSB::getEndpointDirection(_QWORD); weak
// int __fastcall StandardUSB::getNextEndpointDescriptor(_QWORD, _QWORD, _QWORD); weak
// _QWORD __cdecl IOCommandPool::IOCommandPool(IOCommandPool *__hidden this, const OSMetaClass *); idb
// _QWORD __cdecl IOCommandPool::~IOCommandPool(IOCommandPool *__hidden this); idb
// _QWORD __cdecl IOBufferMemoryDescriptor::withOptions(IOBufferMemoryDescriptor *__hidden this, unsigned int, unsigned __int64, unsigned __int64); idb
// void __cdecl OSObject::operator delete(void *); idb
// _QWORD __cdecl OSObject::operator new(OSObject *__hidden this, unsigned __int64); idb
// _QWORD __cdecl IOCommand::IOCommand(IOCommand *__hidden this, const OSMetaClass *); idb
// _QWORD __cdecl IOCommand::~IOCommand(IOCommand *__hidden this); idb
// _QWORD OSMetaClass::instanceConstructed(OSMetaClass *__hidden this); idb

//-------------------------------------------------------------------------
// Data declarations

segment_command_64 stru_20 = { 25u, 232u, "__TEXT", 0uLL, 8192uLL, 0uLL, 8192uLL, 7, 5, 2u, 0u }; // weak
_QWORD *off_2000[2] = { &IOCommandPool::gMetaClass, &IOCommand::gMetaClass }; // weak
_QWORD *off_2008 = &IOCommand::gMetaClass; // weak
void *off_2010 = &`vtable for'IOCommandPool; // weak
void *off_2018 = &`vtable for'IOCommand; // weak
__int64 (__fastcall *off_2050[2])(AppleUSBNetworkingCommandPool *__hidden this) =
{
  &AppleUSBNetworkingCommandPool::~AppleUSBNetworkingCommandPool,
  &AppleUSBNetworkingCommandPool::~AppleUSBNetworkingCommandPool
}; // weak
__int64 (__fastcall *off_2218[2])(AppleUSBNetworkingCommandPool::MetaClass *__hidden this) =
{
  &AppleUSBNetworkingCommandPool::MetaClass::~MetaClass,
  &AppleUSBNetworkingCommandPool::MetaClass::~MetaClass
}; // weak
__int64 (__fastcall *off_2310[2])(AppleUSBNetworkingHostCommandPool *__hidden this) =
{
  &AppleUSBNetworkingHostCommandPool::~AppleUSBNetworkingHostCommandPool,
  &AppleUSBNetworkingHostCommandPool::~AppleUSBNetworkingHostCommandPool
}; // weak
__int64 (__fastcall *off_24E0[2])(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden this) =
{
  &AppleUSBNetworkingHostCommandPool::MetaClass::~MetaClass,
  &AppleUSBNetworkingHostCommandPool::MetaClass::~MetaClass
}; // weak
__int64 (__fastcall *off_25D8[2])(AppleUSBNetworkingCommand *__hidden this) =
{
  &AppleUSBNetworkingCommand::~AppleUSBNetworkingCommand,
  &AppleUSBNetworkingCommand::~AppleUSBNetworkingCommand
}; // weak
__int64 (__fastcall *off_2710[2])(AppleUSBNetworkingCommand::MetaClass *__hidden this) =
{
  &AppleUSBNetworkingCommand::MetaClass::~MetaClass,
  &AppleUSBNetworkingCommand::MetaClass::~MetaClass
}; // weak
_DWORD kmod_info[45] =
{
  0,
  0,
  1,
  4294967295,
  778923875,
  1819308129,
  1919168101,
  1919252073,
  1651733806,
  1952804398,
  1802661751,
  6778473,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  774909493,
  48,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  4294967295,
  0,
  0,
  0,
  0,
  0,
  0,
  0,
  0
}; // idb
_QWORD AppleUSBNetworkingCommandPool::gMetaClass; // weak
_QWORD AppleUSBNetworkingHostCommandPool::gMetaClass; // weak
_QWORD AppleUSBNetworkingCommand::gMetaClass; // weak
int (*_realmain)(void); // weak
int (*_antimain)(void); // weak


//----- (0000000000001230) ----------------------------------------------------
__int64 __fastcall Asciihex_to_binary(char a1)
{
  __int64 result; // rax@1
  unsigned __int8 v2; // di@6

  LOBYTE(result) = a1 - 48;
  if ( (unsigned __int8)(a1 - 48) < 0xAu )
    return (unsigned __int8)result;
  if ( (unsigned __int8)(a1 - 65) <= 5u )
  {
    LOBYTE(result) = a1 - 55;
    return (unsigned __int8)result;
  }
  if ( (unsigned __int8)(a1 - 97) < 6u )
    v2 = a1 - 87;
  else
    v2 = 0;
  return v2;
}

//----- (0000000000001275) ----------------------------------------------------
__int64 __fastcall findMatchingEndpoint(unsigned __int8 a1, unsigned __int8 a2, __int64 a3, __int64 a4)
{
  __int64 v4; // r14@1
  __int64 v5; // r12@1
  __int64 v6; // rax@1
  __int64 v7; // rbx@1
  __int64 v8; // rax@5
  __int64 v10; // [sp+0h] [bp-30h]@1

  v4 = a4;
  v5 = a3;
  v10 = 0LL;
  LODWORD(v6) = StandardUSB::getNextEndpointDescriptor(a3, a4, 0LL);
  v7 = v6;
  if ( v6 )
  {
    v10 = 0LL;
    while ( a1 >> 7 != (unsigned __int8)StandardUSB::getEndpointDirection(v7)
         || (unsigned __int8)StandardUSB::getEndpointType(v7) != a2 )
    {
      LODWORD(v8) = StandardUSB::getNextEndpointDescriptor(v5, v4, v7);
      v7 = v8;
      if ( !v8 )
        return v10;
    }
    v10 = v7;
  }
  return v10;
}
// 2990: using guessed type int __fastcall StandardUSB::getEndpointType(_QWORD);
// 2998: using guessed type int __fastcall StandardUSB::getEndpointDirection(_QWORD);
// 29A0: using guessed type int __fastcall StandardUSB::getNextEndpointDescriptor(_QWORD, _QWORD, _QWORD);

//----- (000000000000130C) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommandPool::MetaClass::MetaClass(AppleUSBNetworkingCommandPool::MetaClass *this))(AppleUSBNetworkingCommandPool::MetaClass *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingCommandPool::MetaClass *__hidden); // rax@1

  OSMetaClass::OSMetaClass(this, "AppleUSBNetworkingCommandPool", off_2000[0], 80LL);
  result = off_2218;
  *(_QWORD *)this = off_2218;
  return result;
}
// 2000: using guessed type _QWORD *off_2000[2];
// 2218: using guessed type __int64 (__fastcall *off_2218[2])(AppleUSBNetworkingCommandPool::MetaClass *__hidden this);
// 2980: using guessed type int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD);

//----- (000000000000133E) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommandPool::MetaClass::~MetaClass(AppleUSBNetworkingCommandPool::MetaClass *this)
{
  return OSMetaClass::~OSMetaClass(this);
}

//----- (0000000000001348) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommandPool::AppleUSBNetworkingCommandPool(IOCommandPool *a1, const OSMetaClass *a2))(AppleUSBNetworkingCommandPool *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingCommandPool *__hidden); // rax@1

  IOCommandPool::IOCommandPool(a1, a2);
  result = off_2050;
  *(_QWORD *)a1 = off_2050;
  return result;
}
// 2050: using guessed type __int64 (__fastcall *off_2050[2])(AppleUSBNetworkingCommandPool *__hidden this);

//----- (0000000000001368) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommandPool::AppleUSBNetworkingCommandPool(IOCommandPool *a1, const OSMetaClass *a2))(AppleUSBNetworkingCommandPool *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingCommandPool *__hidden); // rax@1

  IOCommandPool::IOCommandPool(a1, a2);
  result = off_2050;
  *(_QWORD *)a1 = off_2050;
  return result;
}
// 2050: using guessed type __int64 (__fastcall *off_2050[2])(AppleUSBNetworkingCommandPool *__hidden this);

//----- (0000000000001388) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommandPool::~AppleUSBNetworkingCommandPool(AppleUSBNetworkingCommandPool *this)
{
  return IOCommandPool::~IOCommandPool(this);
}

//----- (0000000000001392) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommandPool::~AppleUSBNetworkingCommandPool(AppleUSBNetworkingCommandPool *this)
{
  return IOCommandPool::~IOCommandPool(this);
}

//----- (000000000000139C) ----------------------------------------------------
void __fastcall AppleUSBNetworkingCommandPool::~AppleUSBNetworkingCommandPool(AppleUSBNetworkingCommandPool *this)
{
  IOCommandPool::~IOCommandPool(this);
  OSObject::operator delete((void *)this);
}

//----- (00000000000013BE) ----------------------------------------------------
_QWORD *__fastcall AppleUSBNetworkingCommandPool::getMetaClass(AppleUSBNetworkingCommandPool *this)
{
  return &AppleUSBNetworkingCommandPool::gMetaClass;
}
// 28B0: using guessed type _QWORD AppleUSBNetworkingCommandPool::gMetaClass;

//----- (00000000000013CC) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommandPool::MetaClass::MetaClass(AppleUSBNetworkingCommandPool::MetaClass *this))(AppleUSBNetworkingCommandPool::MetaClass *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingCommandPool::MetaClass *__hidden); // rax@1

  OSMetaClass::OSMetaClass(this, "AppleUSBNetworkingCommandPool", off_2000[0], 80LL);
  result = off_2218;
  *(_QWORD *)this = off_2218;
  return result;
}
// 2000: using guessed type _QWORD *off_2000[2];
// 2218: using guessed type __int64 (__fastcall *off_2218[2])(AppleUSBNetworkingCommandPool::MetaClass *__hidden this);
// 2980: using guessed type int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD);

//----- (00000000000013FE) ----------------------------------------------------
IOCommandPool *__fastcall AppleUSBNetworkingCommandPool::MetaClass::alloc(AppleUSBNetworkingCommandPool::MetaClass *this, unsigned __int64 a2)
{
  IOCommandPool *v2; // rbx@1

  v2 = (IOCommandPool *)OSObject::operator new((OSObject *)&stru_20.filesize, a2);
  IOCommandPool::IOCommandPool(v2, (const OSMetaClass *)&AppleUSBNetworkingCommandPool::gMetaClass);
  *(_QWORD *)v2 = off_2050;
  OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingCommandPool::gMetaClass);
  return v2;
}
// 20: using guessed type segment_command_64 stru_20;
// 2050: using guessed type __int64 (__fastcall *off_2050[2])(AppleUSBNetworkingCommandPool *__hidden this);
// 28B0: using guessed type _QWORD AppleUSBNetworkingCommandPool::gMetaClass;

//----- (000000000000143E) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommandPool::AppleUSBNetworkingCommandPool(IOCommandPool *a1)
{
  IOCommandPool::IOCommandPool(a1, (const OSMetaClass *)&AppleUSBNetworkingCommandPool::gMetaClass);
  *(_QWORD *)a1 = off_2050;
  return OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingCommandPool::gMetaClass);
}
// 2050: using guessed type __int64 (__fastcall *off_2050[2])(AppleUSBNetworkingCommandPool *__hidden this);
// 28B0: using guessed type _QWORD AppleUSBNetworkingCommandPool::gMetaClass;

//----- (000000000000146E) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommandPool::AppleUSBNetworkingCommandPool(IOCommandPool *a1)
{
  IOCommandPool::IOCommandPool(a1, (const OSMetaClass *)&AppleUSBNetworkingCommandPool::gMetaClass);
  *(_QWORD *)a1 = off_2050;
  return OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingCommandPool::gMetaClass);
}
// 2050: using guessed type __int64 (__fastcall *off_2050[2])(AppleUSBNetworkingCommandPool *__hidden this);
// 28B0: using guessed type _QWORD AppleUSBNetworkingCommandPool::gMetaClass;

//----- (000000000000149E) ----------------------------------------------------
IOCommandPool *__fastcall AppleUSBNetworkingCommandPool::withParameters(__int64 a1, unsigned __int64 a2, unsigned int a3)
{
  unsigned int v3; // er14@1
  IOCommandPool *v4; // rbx@1
  IOCommandPool *result; // rax@1
  char v6; // cl@2

  v3 = a3;
  v4 = (IOCommandPool *)OSObject::operator new((OSObject *)&stru_20.filesize, a2);
  IOCommandPool::IOCommandPool(v4, (const OSMetaClass *)&AppleUSBNetworkingCommandPool::gMetaClass);
  *(_QWORD *)v4 = off_2050;
  OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingCommandPool::gMetaClass);
  result = v4;
  if ( v4 )
  {
    v6 = (*(int (__fastcall **)(IOCommandPool *, __int64, _QWORD, _QWORD))(*(_QWORD *)v4 + 392LL))(
           v4,
           a1,
           (unsigned int)a2,
           v3);
    result = 0LL;
    if ( v6 )
      result = v4;
    if ( !v6 )
    {
      (*(void (__fastcall **)(IOCommandPool *))(*(_QWORD *)v4 + 40LL))(v4);
      result = 0LL;
    }
  }
  return result;
}
// 20: using guessed type segment_command_64 stru_20;
// 2050: using guessed type __int64 (__fastcall *off_2050[2])(AppleUSBNetworkingCommandPool *__hidden this);
// 28B0: using guessed type _QWORD AppleUSBNetworkingCommandPool::gMetaClass;

//----- (000000000000152C) ----------------------------------------------------
char __fastcall AppleUSBNetworkingCommandPool::initWithParameters(__int64 a1, __int64 a2, int a3, int a4)
{
  int v4; // er15@1
  int v5; // er13@1
  char v6; // r14@1

  v4 = a4;
  v5 = a3;
  v6 = 0;
  if ( a2 )
  {
    if ( a3 )
    {
      if ( a4 & 3 )
      {
        v6 = (*((int (__cdecl **)(_QWORD))off_2010 + 37))(a1);
        if ( v6 )
        {
          *(_BYTE *)(a1 + 56) = 1;
          *(_DWORD *)(a1 + 60) = v5;
          *(_DWORD *)(a1 + 64) = v4;
          *(_QWORD *)(a1 + 72) = a2;
          (*(void (__fastcall **)(__int64))(*(_QWORD *)a2 + 32LL))(a2);
        }
      }
    }
  }
  return v6;
}
// 2010: using guessed type void *off_2010;

//----- (00000000000015A2) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommandPool::start(AppleUSBNetworkingCommandPool *this)
{
  __int64 result; // rax@1
  __int64 v2; // rax@2
  __int64 v3; // rcx@2

  result = 0LL;
  if ( *((_BYTE *)this + 56) == 1 )
  {
    *((_BYTE *)this + 56) = 0;
    LODWORD(v2) = (*(int (__fastcall **)(AppleUSBNetworkingCommandPool *, _QWORD))(*(_QWORD *)this + 296LL))(this, 0LL);
    v3 = v2;
    result = 3758097085LL;
    if ( v3 )
    {
      (*(void (__fastcall **)(AppleUSBNetworkingCommandPool *, __int64))(*(_QWORD *)this + 304LL))(this, v3);
      result = 0LL;
    }
  }
  return result;
}

//----- (00000000000015EE) ----------------------------------------------------
int __fastcall AppleUSBNetworkingCommandPool::stop(AppleUSBNetworkingCommandPool *this)
{
  (*(void (__cdecl **)(AppleUSBNetworkingCommandPool *))(*(_QWORD *)this + 32LL))(this);
  (*(void (__fastcall **)(_QWORD, _QWORD, _QWORD, _QWORD, _QWORD, _QWORD))(**((_QWORD **)this + 5) + 456LL))(
    *((_QWORD *)this + 5),
    *(_QWORD *)(*(_QWORD *)this + 416LL),
    0LL,
    0LL,
    0LL,
    0LL);
  return (*(int (__fastcall **)(AppleUSBNetworkingCommandPool *))(*(_QWORD *)this + 40LL))(this);
}

//----- (000000000000162E) ----------------------------------------------------
void __fastcall AppleUSBNetworkingCommandPool::stopGated(AppleUSBNetworkingCommandPool *this)
{
  int (__fastcall *v1)(AppleUSBNetworkingCommandPool *, _QWORD); // rbx@2
  __int64 v2; // rax@4

  if ( !*((_BYTE *)this + 56) )
  {
    *((_BYTE *)this + 56) = 1;
    v1 = (int (__fastcall *)(AppleUSBNetworkingCommandPool *, _QWORD))*((_QWORD *)off_2010 + 39);
    while ( 1 )
    {
      LODWORD(v2) = v1(this, 0LL);
      if ( !v2 )
        break;
      (*(void (__fastcall **)(__int64))(*(_QWORD *)v2 + 40LL))(v2);
    }
  }
}
// 2010: using guessed type void *off_2010;

//----- (000000000000166E) ----------------------------------------------------
int __fastcall AppleUSBNetworkingCommandPool::free(AppleUSBNetworkingCommandPool *this)
{
  AppleUSBNetworkingCommandPool *v1; // rbx@1
  __int64 v2; // rdi@3

  v1 = this;
  if ( !*((_BYTE *)this + 56) )
    (*(void (__cdecl **)(AppleUSBNetworkingCommandPool *))(*(_QWORD *)this + 408LL))(this);
  v2 = *((_QWORD *)this + 9);
  if ( v2 )
    (*(void (__cdecl **)(__int64))(*(_QWORD *)v2 + 40LL))(v2);
  *((_QWORD *)v1 + 9) = 0LL;
  return (*((int (__fastcall **)(_QWORD))off_2010 + 20))(v1);
}
// 2010: using guessed type void *off_2010;

//----- (00000000000016B6) ----------------------------------------------------
int __fastcall AppleUSBNetworkingCommandPool::returnCommand(AppleUSBNetworkingCommandPool *this, IOCommand *a2)
{
  (*(void (**)(void))(*(_QWORD *)this + 32LL))();
  (*((void (**)(void))off_2010 + 40))();
  return (*(int (__fastcall **)(AppleUSBNetworkingCommandPool *))(*(_QWORD *)this + 40LL))(this);
}
// 2010: using guessed type void *off_2010;

//----- (00000000000016EA) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommandPool::gatedReturnCommand(AppleUSBNetworkingCommandPool *this, IOCommand *a2)
{
  if ( *((_BYTE *)this + 56) )
    (*(void (__fastcall **)(IOCommand *))(*(_QWORD *)a2 + 40LL))(a2);
  else
    (*((void (__fastcall **)(_QWORD, _QWORD))off_2010 + 42))(this, a2);
  return 0LL;
}
// 2010: using guessed type void *off_2010;

//----- (0000000000001710) ----------------------------------------------------
int __fastcall AppleUSBNetworkingCommandPool::getCommand(AppleUSBNetworkingCommandPool *this, unsigned __int8 a2)
{
  __int64 v2; // rax@1
  int (__fastcall *v3)(AppleUSBNetworkingCommandPool *, _QWORD); // r12@2
  signed int v4; // ebx@4
  __int64 v5; // rax@5

  LODWORD(v2) = 0;
  if ( !*((_BYTE *)this + 56) )
  {
    v3 = (int (__fastcall *)(AppleUSBNetworkingCommandPool *, _QWORD))*((_QWORD *)off_2010 + 39);
    LODWORD(v2) = v3(this, 0LL);
    if ( !v2 )
    {
      v4 = -2;
      do
      {
        LODWORD(v5) = (*(int (__fastcall **)(AppleUSBNetworkingCommandPool *))(*(_QWORD *)this + 424LL))(this);
        if ( !v5 )
          break;
        (*(void (__fastcall **)(AppleUSBNetworkingCommandPool *, __int64))(*(_QWORD *)this + 304LL))(this, v5);
        ++v4;
      }
      while ( v4 );
      LODWORD(v2) = v3(this, a2);
    }
  }
  return v2;
}
// 2010: using guessed type void *off_2010;

//----- (000000000000178C) ----------------------------------------------------
IOCommand *__fastcall AppleUSBNetworkingCommandPool::allocateCommand(AppleUSBNetworkingCommandPool *this, __int64 a2, __int64 a3, unsigned __int64 a4)
{
  AppleUSBNetworkingCommandPool *v4; // rax@1
  IOBufferMemoryDescriptor *v5; // rdx@1
  AppleUSBNetworkingCommandPool *v6; // rbx@1
  IOCommand *v7; // r14@1
  AppleUSBNetworkingCommandPool *v8; // rsi@2

  v4 = (AppleUSBNetworkingCommandPool *)IOBufferMemoryDescriptor::withOptions(
                                          (IOBufferMemoryDescriptor *)*((_DWORD *)this + 16),
                                          *((_DWORD *)this + 15),
                                          8uLL,
                                          a4);
  v6 = v4;
  v7 = 0LL;
  if ( v4 )
  {
    v8 = v4;
    v7 = AppleUSBNetworkingCommand::withParameters(this, v4, v5);
    if ( !v7 )
      (*(void (__fastcall **)(AppleUSBNetworkingCommandPool *, AppleUSBNetworkingCommandPool *))(*(_QWORD *)v6 + 40LL))(
        v6,
        v8);
  }
  return v7;
}

//----- (00000000000017E0) ----------------------------------------------------
IOCommand *__fastcall AppleUSBNetworkingCommand::withParameters(AppleUSBNetworkingCommand *this, AppleUSBNetworkingCommandPool *a2, IOBufferMemoryDescriptor *a3)
{
  IOCommand *v3; // rbx@1
  IOCommand *result; // rax@1
  char v5; // cl@2

  v3 = (IOCommand *)OSObject::operator new((OSObject *)&stru_20.vmaddr, (unsigned __int64)a2);
  IOCommand::IOCommand(v3, (const OSMetaClass *)&AppleUSBNetworkingCommand::gMetaClass);
  *(_QWORD *)v3 = off_25D8;
  OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingCommand::gMetaClass);
  result = v3;
  if ( v3 )
  {
    v5 = (*(int (__fastcall **)(IOCommand *, AppleUSBNetworkingCommand *, AppleUSBNetworkingCommandPool *))(*(_QWORD *)v3 + 280LL))(
           v3,
           this,
           a2);
    result = 0LL;
    if ( v5 )
      result = v3;
    if ( !v5 )
    {
      (*(void (__fastcall **)(IOCommand *))(*(_QWORD *)v3 + 40LL))(v3);
      result = 0LL;
    }
  }
  return result;
}
// 20: using guessed type segment_command_64 stru_20;
// 25D8: using guessed type __int64 (__fastcall *off_25D8[2])(AppleUSBNetworkingCommand *__hidden this);
// 2900: using guessed type _QWORD AppleUSBNetworkingCommand::gMetaClass;

//----- (000000000000185E) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingHostCommandPool::MetaClass::MetaClass(AppleUSBNetworkingHostCommandPool::MetaClass *this))(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden); // rax@1

  OSMetaClass::OSMetaClass(this, "AppleUSBNetworkingHostCommandPool", &AppleUSBNetworkingCommandPool::gMetaClass, 96LL);
  result = off_24E0;
  *(_QWORD *)this = off_24E0;
  return result;
}
// 24E0: using guessed type __int64 (__fastcall *off_24E0[2])(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden this);
// 28B0: using guessed type _QWORD AppleUSBNetworkingCommandPool::gMetaClass;
// 2980: using guessed type int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD);

//----- (0000000000001890) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingHostCommandPool::MetaClass::~MetaClass(AppleUSBNetworkingHostCommandPool::MetaClass *this)
{
  return OSMetaClass::~OSMetaClass(this);
}

//----- (000000000000189A) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingHostCommandPool::AppleUSBNetworkingHostCommandPool(IOCommandPool *a1, const OSMetaClass *a2))(AppleUSBNetworkingHostCommandPool *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingHostCommandPool *__hidden); // rax@1

  IOCommandPool::IOCommandPool(a1, a2);
  result = off_2310;
  *(_QWORD *)a1 = off_2310;
  return result;
}
// 2310: using guessed type __int64 (__fastcall *off_2310[2])(AppleUSBNetworkingHostCommandPool *__hidden this);

//----- (00000000000018BA) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingHostCommandPool::AppleUSBNetworkingHostCommandPool(IOCommandPool *a1, const OSMetaClass *a2))(AppleUSBNetworkingHostCommandPool *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingHostCommandPool *__hidden); // rax@1

  IOCommandPool::IOCommandPool(a1, a2);
  result = off_2310;
  *(_QWORD *)a1 = off_2310;
  return result;
}
// 2310: using guessed type __int64 (__fastcall *off_2310[2])(AppleUSBNetworkingHostCommandPool *__hidden this);

//----- (00000000000018DA) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingHostCommandPool::~AppleUSBNetworkingHostCommandPool(AppleUSBNetworkingHostCommandPool *this)
{
  return IOCommandPool::~IOCommandPool(this);
}

//----- (00000000000018E4) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingHostCommandPool::~AppleUSBNetworkingHostCommandPool(AppleUSBNetworkingHostCommandPool *this)
{
  return IOCommandPool::~IOCommandPool(this);
}

//----- (00000000000018EE) ----------------------------------------------------
void __fastcall AppleUSBNetworkingHostCommandPool::~AppleUSBNetworkingHostCommandPool(AppleUSBNetworkingHostCommandPool *this)
{
  IOCommandPool::~IOCommandPool(this);
  OSObject::operator delete((void *)this);
}

//----- (0000000000001910) ----------------------------------------------------
_QWORD *__fastcall AppleUSBNetworkingHostCommandPool::getMetaClass(AppleUSBNetworkingHostCommandPool *this)
{
  return &AppleUSBNetworkingHostCommandPool::gMetaClass;
}
// 28D8: using guessed type _QWORD AppleUSBNetworkingHostCommandPool::gMetaClass;

//----- (000000000000191E) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingHostCommandPool::MetaClass::MetaClass(AppleUSBNetworkingHostCommandPool::MetaClass *this))(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden); // rax@1

  OSMetaClass::OSMetaClass(this, "AppleUSBNetworkingHostCommandPool", &AppleUSBNetworkingCommandPool::gMetaClass, 96LL);
  result = off_24E0;
  *(_QWORD *)this = off_24E0;
  return result;
}
// 24E0: using guessed type __int64 (__fastcall *off_24E0[2])(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden this);
// 28B0: using guessed type _QWORD AppleUSBNetworkingCommandPool::gMetaClass;
// 2980: using guessed type int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD);

//----- (0000000000001950) ----------------------------------------------------
IOCommandPool *__fastcall AppleUSBNetworkingHostCommandPool::MetaClass::alloc(AppleUSBNetworkingHostCommandPool::MetaClass *this, unsigned __int64 a2)
{
  IOCommandPool *v2; // rbx@1

  v2 = (IOCommandPool *)OSObject::operator new((OSObject *)&stru_20.nsects, a2);
  IOCommandPool::IOCommandPool(v2, (const OSMetaClass *)&AppleUSBNetworkingHostCommandPool::gMetaClass);
  *(_QWORD *)v2 = off_2310;
  OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingHostCommandPool::gMetaClass);
  return v2;
}
// 20: using guessed type segment_command_64 stru_20;
// 2310: using guessed type __int64 (__fastcall *off_2310[2])(AppleUSBNetworkingHostCommandPool *__hidden this);
// 28D8: using guessed type _QWORD AppleUSBNetworkingHostCommandPool::gMetaClass;

//----- (0000000000001990) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingHostCommandPool::AppleUSBNetworkingHostCommandPool(IOCommandPool *a1)
{
  IOCommandPool::IOCommandPool(a1, (const OSMetaClass *)&AppleUSBNetworkingHostCommandPool::gMetaClass);
  *(_QWORD *)a1 = off_2310;
  return OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingHostCommandPool::gMetaClass);
}
// 2310: using guessed type __int64 (__fastcall *off_2310[2])(AppleUSBNetworkingHostCommandPool *__hidden this);
// 28D8: using guessed type _QWORD AppleUSBNetworkingHostCommandPool::gMetaClass;

//----- (00000000000019C0) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingHostCommandPool::AppleUSBNetworkingHostCommandPool(IOCommandPool *a1)
{
  IOCommandPool::IOCommandPool(a1, (const OSMetaClass *)&AppleUSBNetworkingHostCommandPool::gMetaClass);
  *(_QWORD *)a1 = off_2310;
  return OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingHostCommandPool::gMetaClass);
}
// 2310: using guessed type __int64 (__fastcall *off_2310[2])(AppleUSBNetworkingHostCommandPool *__hidden this);
// 28D8: using guessed type _QWORD AppleUSBNetworkingHostCommandPool::gMetaClass;

//----- (00000000000019F0) ----------------------------------------------------
IOCommandPool *__fastcall AppleUSBNetworkingHostCommandPool::withParameters(__int64 a1, unsigned __int64 a2, unsigned int a3)
{
  unsigned int v3; // er14@1
  IOCommandPool *v4; // rbx@1
  IOCommandPool *result; // rax@1
  char v6; // cl@2

  v3 = a3;
  v4 = (IOCommandPool *)OSObject::operator new((OSObject *)&stru_20.nsects, a2);
  IOCommandPool::IOCommandPool(v4, (const OSMetaClass *)&AppleUSBNetworkingHostCommandPool::gMetaClass);
  *(_QWORD *)v4 = off_2310;
  OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingHostCommandPool::gMetaClass);
  result = v4;
  if ( v4 )
  {
    v6 = (*(int (__fastcall **)(IOCommandPool *, __int64, _QWORD, _QWORD))(*(_QWORD *)v4 + 432LL))(
           v4,
           a1,
           (unsigned int)a2,
           v3);
    result = 0LL;
    if ( v6 )
      result = v4;
    if ( !v6 )
    {
      (*(void (__fastcall **)(IOCommandPool *))(*(_QWORD *)v4 + 40LL))(v4);
      result = 0LL;
    }
  }
  return result;
}
// 20: using guessed type segment_command_64 stru_20;
// 2310: using guessed type __int64 (__fastcall *off_2310[2])(AppleUSBNetworkingHostCommandPool *__hidden this);
// 28D8: using guessed type _QWORD AppleUSBNetworkingHostCommandPool::gMetaClass;

//----- (0000000000001A7E) ----------------------------------------------------
char __fastcall AppleUSBNetworkingHostCommandPool::initWithParameters(__int64 a1, __int64 a2, int a3, int a4)
{
  int v4; // er15@1
  int v5; // er12@1
  __int64 v6; // rbx@1
  __int64 v7; // rax@2
  __int64 v8; // rsi@2
  char v9; // r15@2

  v4 = a4;
  v5 = a3;
  v6 = a2;
  if ( a2 )
  {
    LODWORD(v7) = (*(int (__fastcall **)(__int64))(*(_QWORD *)a2 + 1672LL))(a2);
    v8 = v7;
    v9 = AppleUSBNetworkingCommandPool::initWithParameters(a1, v7, v5, v4);
    if ( v9 )
    {
      *(_QWORD *)(a1 + 80) = v6;
      (*(void (__fastcall **)(__int64, __int64))(*(_QWORD *)v6 + 32LL))(v6, v8);
    }
  }
  else
  {
    v9 = 0;
  }
  return v9;
}

//----- (0000000000001ADE) ----------------------------------------------------
IOCommand *__fastcall AppleUSBNetworkingHostCommandPool::allocateCommand(AppleUSBNetworkingHostCommandPool *this)
{
  AppleUSBNetworkingCommandPool *v1; // rax@1
  IOBufferMemoryDescriptor *v2; // rdx@1
  AppleUSBNetworkingCommandPool *v3; // r15@1
  IOCommand *v4; // r14@1
  AppleUSBNetworkingCommandPool *v5; // rsi@2

  LODWORD(v1) = (*(int (__fastcall **)(_QWORD, _QWORD, _QWORD))(**((_QWORD **)this + 10) + 2968LL))(
                  *((_QWORD *)this + 10),
                  *((_DWORD *)this + 22),
                  *((_DWORD *)this + 15));
  v3 = v1;
  v4 = 0LL;
  if ( v1 )
  {
    v5 = v1;
    v4 = AppleUSBNetworkingCommand::withParameters(this, v1, v2);
    if ( !v4 )
      (*(void (__fastcall **)(AppleUSBNetworkingCommandPool *, AppleUSBNetworkingCommandPool *))(*(_QWORD *)v3 + 40LL))(
        v3,
        v5);
  }
  return v4;
}

//----- (0000000000001B34) ----------------------------------------------------
int __fastcall AppleUSBNetworkingHostCommandPool::free(AppleUSBNetworkingHostCommandPool *this)
{
  AppleUSBNetworkingHostCommandPool *v1; // rbx@1
  __int64 v2; // rdi@3

  v1 = this;
  if ( !*((_BYTE *)this + 56) )
    (*(void (__cdecl **)(AppleUSBNetworkingHostCommandPool *))(*(_QWORD *)this + 408LL))(this);
  v2 = *((_QWORD *)this + 10);
  if ( v2 )
    (*(void (__cdecl **)(__int64))(*(_QWORD *)v2 + 40LL))(v2);
  *((_QWORD *)v1 + 10) = 0LL;
  return AppleUSBNetworkingCommandPool::free(v1);
}

//----- (0000000000001B74) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommand::MetaClass::MetaClass(AppleUSBNetworkingCommand::MetaClass *this))(AppleUSBNetworkingCommand::MetaClass *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingCommand::MetaClass *__hidden); // rax@1

  OSMetaClass::OSMetaClass(this, "AppleUSBNetworkingCommand", off_2008, 56LL);
  result = off_2710;
  *(_QWORD *)this = off_2710;
  return result;
}
// 2008: using guessed type _QWORD *off_2008;
// 2710: using guessed type __int64 (__fastcall *off_2710[2])(AppleUSBNetworkingCommand::MetaClass *__hidden this);
// 2980: using guessed type int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD);

//----- (0000000000001BA6) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommand::MetaClass::~MetaClass(AppleUSBNetworkingCommand::MetaClass *this)
{
  return OSMetaClass::~OSMetaClass(this);
}

//----- (0000000000001BB0) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommand::AppleUSBNetworkingCommand(IOCommand *a1, const OSMetaClass *a2))(AppleUSBNetworkingCommand *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingCommand *__hidden); // rax@1

  IOCommand::IOCommand(a1, a2);
  result = off_25D8;
  *(_QWORD *)a1 = off_25D8;
  return result;
}
// 25D8: using guessed type __int64 (__fastcall *off_25D8[2])(AppleUSBNetworkingCommand *__hidden this);

//----- (0000000000001BD0) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommand::AppleUSBNetworkingCommand(IOCommand *a1, const OSMetaClass *a2))(AppleUSBNetworkingCommand *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingCommand *__hidden); // rax@1

  IOCommand::IOCommand(a1, a2);
  result = off_25D8;
  *(_QWORD *)a1 = off_25D8;
  return result;
}
// 25D8: using guessed type __int64 (__fastcall *off_25D8[2])(AppleUSBNetworkingCommand *__hidden this);

//----- (0000000000001BF0) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommand::~AppleUSBNetworkingCommand(AppleUSBNetworkingCommand *this)
{
  return IOCommand::~IOCommand(this);
}

//----- (0000000000001BFA) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommand::~AppleUSBNetworkingCommand(AppleUSBNetworkingCommand *this)
{
  return IOCommand::~IOCommand(this);
}

//----- (0000000000001C04) ----------------------------------------------------
void __fastcall AppleUSBNetworkingCommand::~AppleUSBNetworkingCommand(AppleUSBNetworkingCommand *this)
{
  IOCommand::~IOCommand(this);
  OSObject::operator delete((void *)this);
}

//----- (0000000000001C26) ----------------------------------------------------
_QWORD *__fastcall AppleUSBNetworkingCommand::getMetaClass(AppleUSBNetworkingCommand *this)
{
  return &AppleUSBNetworkingCommand::gMetaClass;
}
// 2900: using guessed type _QWORD AppleUSBNetworkingCommand::gMetaClass;

//----- (0000000000001C34) ----------------------------------------------------
__int64 (__fastcall **__fastcall AppleUSBNetworkingCommand::MetaClass::MetaClass(AppleUSBNetworkingCommand::MetaClass *this))(AppleUSBNetworkingCommand::MetaClass *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingCommand::MetaClass *__hidden); // rax@1

  OSMetaClass::OSMetaClass(this, "AppleUSBNetworkingCommand", off_2008, 56LL);
  result = off_2710;
  *(_QWORD *)this = off_2710;
  return result;
}
// 2008: using guessed type _QWORD *off_2008;
// 2710: using guessed type __int64 (__fastcall *off_2710[2])(AppleUSBNetworkingCommand::MetaClass *__hidden this);
// 2980: using guessed type int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD);

//----- (0000000000001C66) ----------------------------------------------------
IOCommand *__fastcall AppleUSBNetworkingCommand::MetaClass::alloc(AppleUSBNetworkingCommand::MetaClass *this, unsigned __int64 a2)
{
  IOCommand *v2; // rbx@1

  v2 = (IOCommand *)OSObject::operator new((OSObject *)&stru_20.vmaddr, a2);
  IOCommand::IOCommand(v2, (const OSMetaClass *)&AppleUSBNetworkingCommand::gMetaClass);
  *(_QWORD *)v2 = off_25D8;
  OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingCommand::gMetaClass);
  return v2;
}
// 20: using guessed type segment_command_64 stru_20;
// 25D8: using guessed type __int64 (__fastcall *off_25D8[2])(AppleUSBNetworkingCommand *__hidden this);
// 2900: using guessed type _QWORD AppleUSBNetworkingCommand::gMetaClass;

//----- (0000000000001CA6) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommand::AppleUSBNetworkingCommand(IOCommand *a1)
{
  IOCommand::IOCommand(a1, (const OSMetaClass *)&AppleUSBNetworkingCommand::gMetaClass);
  *(_QWORD *)a1 = off_25D8;
  return OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingCommand::gMetaClass);
}
// 25D8: using guessed type __int64 (__fastcall *off_25D8[2])(AppleUSBNetworkingCommand *__hidden this);
// 2900: using guessed type _QWORD AppleUSBNetworkingCommand::gMetaClass;

//----- (0000000000001CD6) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommand::AppleUSBNetworkingCommand(IOCommand *a1)
{
  IOCommand::IOCommand(a1, (const OSMetaClass *)&AppleUSBNetworkingCommand::gMetaClass);
  *(_QWORD *)a1 = off_25D8;
  return OSMetaClass::instanceConstructed((OSMetaClass *)&AppleUSBNetworkingCommand::gMetaClass);
}
// 25D8: using guessed type __int64 (__fastcall *off_25D8[2])(AppleUSBNetworkingCommand *__hidden this);
// 2900: using guessed type _QWORD AppleUSBNetworkingCommand::gMetaClass;

//----- (0000000000001D06) ----------------------------------------------------
char __fastcall AppleUSBNetworkingCommand::initWithParameters(AppleUSBNetworkingCommand *this, AppleUSBNetworkingCommandPool *a2, IOBufferMemoryDescriptor *a3)
{
  IOBufferMemoryDescriptor *v3; // r15@1
  char v4; // r14@1

  v3 = a3;
  v4 = 0;
  if ( a2 )
  {
    if ( a3 )
    {
      v4 = (*((int (**)(void))off_2018 + 19))();
      if ( v4 )
      {
        *((_QWORD *)this + 5) = v3;
        *((_QWORD *)this + 4) = a2;
        (*(void (__fastcall **)(AppleUSBNetworkingCommandPool *))(*(_QWORD *)a2 + 32LL))(a2);
      }
    }
  }
  return v4;
}
// 2018: using guessed type void *off_2018;

//----- (0000000000001D5E) ----------------------------------------------------
int __fastcall AppleUSBNetworkingCommand::getDataPointer(AppleUSBNetworkingCommand *this)
{
  __int64 v1; // rdi@1
  int result; // eax@2

  v1 = *((_QWORD *)this + 5);
  if ( v1 )
    result = (*(int (**)(void))(*(_QWORD *)v1 + 736LL))();
  else
    result = 0;
  return result;
}

//----- (0000000000001D7A) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommand::setBufferLength(AppleUSBNetworkingCommand *this, unsigned __int64 a2)
{
  AppleUSBNetworkingCommand *v2; // rbx@1
  __int64 v3; // rdi@1
  __int64 result; // rax@1
  unsigned __int64 v5; // rax@2
  unsigned __int64 v6; // rcx@2

  v2 = this;
  v3 = *((_QWORD *)this + 5);
  result = 3758097112LL;
  if ( v3 )
  {
    LODWORD(v5) = (*(int (**)(void))(*(_QWORD *)v3 + 728LL))();
    v6 = v5;
    result = 3758097090LL;
    if ( v6 >= a2 )
    {
      (*(void (**)(void))(**((_QWORD **)v2 + 5) + 712LL))();
      result = 0LL;
    }
  }
  return result;
}

//----- (0000000000001DC2) ----------------------------------------------------
int __fastcall AppleUSBNetworkingCommand::free(AppleUSBNetworkingCommand *this)
{
  AppleUSBNetworkingCommand *v1; // rbx@1
  __int64 v2; // rdi@1
  __int64 v3; // rdi@3
  __int64 v4; // rdi@5

  v1 = this;
  v2 = *((_QWORD *)this + 4);
  if ( v2 )
    (*(void (__cdecl **)(__int64))(*(_QWORD *)v2 + 40LL))(v2);
  *((_QWORD *)v1 + 4) = 0LL;
  v3 = *((_QWORD *)v1 + 5);
  if ( v3 )
    (*(void (__cdecl **)(__int64))(*(_QWORD *)v3 + 40LL))(v3);
  *((_QWORD *)v1 + 5) = 0LL;
  v4 = *((_QWORD *)v1 + 6);
  if ( v4 )
    (*(void (__cdecl **)(__int64))(*(_QWORD *)v4 + 40LL))(v4);
  *((_QWORD *)v1 + 6) = 0LL;
  return (*((int (__fastcall **)(_QWORD))off_2018 + 20))(v1);
}
// 2018: using guessed type void *off_2018;

//----- (0000000000001E26) ----------------------------------------------------
int __fastcall AppleUSBNetworkingCommand::setContext(AppleUSBNetworkingCommand *this, OSObject *a2)
{
  AppleUSBNetworkingCommand *v2; // rbx@1
  __int64 v3; // rdi@1
  int result; // eax@2

  v2 = this;
  v3 = *((_QWORD *)this + 6);
  if ( v3 )
    result = (*(int (**)(void))(*(_QWORD *)v3 + 40LL))();
  *((_QWORD *)v2 + 6) = 0LL;
  if ( a2 )
  {
    *((_QWORD *)v2 + 6) = a2;
    result = (*(int (__fastcall **)(OSObject *))(*(_QWORD *)a2 + 32LL))(a2);
  }
  return result;
}

//----- (0000000000001E66) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommandPool::MetaClass::~MetaClass(AppleUSBNetworkingCommandPool::MetaClass *this)
{
  return OSMetaClass::~OSMetaClass(this);
}

//----- (0000000000001E70) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingHostCommandPool::MetaClass::~MetaClass(AppleUSBNetworkingHostCommandPool::MetaClass *this)
{
  return OSMetaClass::~OSMetaClass(this);
}

//----- (0000000000001E7A) ----------------------------------------------------
__int64 __fastcall AppleUSBNetworkingCommand::MetaClass::~MetaClass(AppleUSBNetworkingCommand::MetaClass *this)
{
  return OSMetaClass::~OSMetaClass(this);
}

//----- (0000000000001E84) ----------------------------------------------------
__int64 (__fastcall **_GLOBAL__sub_I_AppleUSBNetworkingCommand_cpp())(AppleUSBNetworkingCommand::MetaClass *__hidden this)
{
  __int64 (__fastcall **result)(AppleUSBNetworkingCommand::MetaClass *__hidden); // rax@1

  OSMetaClass::OSMetaClass(
    &AppleUSBNetworkingCommandPool::gMetaClass,
    "AppleUSBNetworkingCommandPool",
    off_2000[0],
    80LL);
  AppleUSBNetworkingCommandPool::gMetaClass = off_2218;
  OSMetaClass::OSMetaClass(
    &AppleUSBNetworkingHostCommandPool::gMetaClass,
    "AppleUSBNetworkingHostCommandPool",
    &AppleUSBNetworkingCommandPool::gMetaClass,
    96LL);
  AppleUSBNetworkingHostCommandPool::gMetaClass = off_24E0;
  OSMetaClass::OSMetaClass(&AppleUSBNetworkingCommand::gMetaClass, "AppleUSBNetworkingCommand", off_2008, 56LL);
  result = off_2710;
  AppleUSBNetworkingCommand::gMetaClass = off_2710;
  return result;
}
// 2000: using guessed type _QWORD *off_2000[2];
// 2008: using guessed type _QWORD *off_2008;
// 2218: using guessed type __int64 (__fastcall *off_2218[2])(AppleUSBNetworkingCommandPool::MetaClass *__hidden this);
// 24E0: using guessed type __int64 (__fastcall *off_24E0[2])(AppleUSBNetworkingHostCommandPool::MetaClass *__hidden this);
// 2710: using guessed type __int64 (__fastcall *off_2710[2])(AppleUSBNetworkingCommand::MetaClass *__hidden this);
// 28B0: using guessed type _QWORD AppleUSBNetworkingCommandPool::gMetaClass;
// 28D8: using guessed type _QWORD AppleUSBNetworkingHostCommandPool::gMetaClass;
// 2900: using guessed type _QWORD AppleUSBNetworkingCommand::gMetaClass;
// 2980: using guessed type int __fastcall OSMetaClass::OSMetaClass(_QWORD, _QWORD, _QWORD, _QWORD);

//----- (0000000000001F17) ----------------------------------------------------
__int64 `global destructor keyed to'_a()
{
  OSMetaClass::~OSMetaClass((OSMetaClass *)&AppleUSBNetworkingCommand::gMetaClass);
  OSMetaClass::~OSMetaClass((OSMetaClass *)&AppleUSBNetworkingHostCommandPool::gMetaClass);
  return OSMetaClass::~OSMetaClass((OSMetaClass *)&AppleUSBNetworkingCommandPool::gMetaClass);
}
// 28B0: using guessed type _QWORD AppleUSBNetworkingCommandPool::gMetaClass;
// 28D8: using guessed type _QWORD AppleUSBNetworkingHostCommandPool::gMetaClass;
// 2900: using guessed type _QWORD AppleUSBNetworkingCommand::gMetaClass;

//----- (0000000000001F40) ----------------------------------------------------
int _start()
{
  int result; // eax@2

  if ( _realmain )
    result = _realmain();
  else
    result = 0;
  return result;
}
// 2928: using guessed type int (*_realmain)(void);

//----- (0000000000001F5A) ----------------------------------------------------
char *OSKextGetCurrentIdentifier()
{
  return (char *)&kmod_info + 16;
}

//----- (0000000000001F6B) ----------------------------------------------------
char *OSKextGetCurrentVersionString()
{
  return (char *)&kmod_info + 80;
}

//----- (0000000000001F7C) ----------------------------------------------------
__int64 OSKextGetCurrentLoadTag()
{
  return kmod_info[3];
}

//----- (0000000000001F8C) ----------------------------------------------------
int _stop()
{
  int result; // eax@2

  if ( _antimain )
    result = _antimain();
  else
    result = 0;
  return result;
}
// 2930: using guessed type int (*_antimain)(void);

// ALL OK, 68 function(s) have been successfully decompiled
